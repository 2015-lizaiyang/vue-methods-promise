{"version":3,"file":"vue-methods-promise.min.js","sources":["../src/isPromise.js","../src/index.js","../src/methodsPromise.js"],"sourcesContent":["export default function isPromise (obj) {\n  return !!obj && typeof obj === 'object' && typeof obj.constructor === 'function' && !Object.hasOwnProperty.call(obj, 'constructor') && obj.constructor.name === 'Promise'\n}\n","import methodsPromise from './methodsPromise'\n\nexport default function install (Vue, opt) {\n  if (install.installed) return // already installed\n\n  Vue.mixin(methodsPromise(opt))\n}\n","import isPromise from './isPromise'\n\nexport default (opt = {}) => {\n  // Configure the hook function\n  if (typeof opt.hookName !== 'string') {\n    opt.hookName = '$promise'\n  }\n  // Global hook function\n  if (typeof opt.promise !== 'function') {\n    opt.promise = () => {}\n  }\n\n  return {\n    beforeCreate () {\n      const { methods } = this.$options\n      if (!Object.prototype.toString.call(methods) === '[object Object]') return\n      Object.keys(methods).forEach((k) => {\n        let item = methods[k]\n        if (typeof item === 'function' && k !== opt.hook) {\n          methods[k] = (...arg) => {\n            let back = item.apply(this, arg)\n            if (isPromise(back)) {\n              if (typeof this[opt.hookName] === 'function') {\n                if (isPromise(this[opt.hookName](back))) {\n                  opt.promise.call(this, back)\n                }\n              } else {\n                opt.promise.call(this, back)\n              }\n            }\n          }\n        }\n      })\n    }\n  }\n}\n"],"names":["isPromise","obj","constructor","Object","hasOwnProperty","call","name","install","Vue","opt","installed","mixin","methodsPromise","hookName","promise","methods","this","$options","prototype","toString","keys","forEach","k","item","hook","arg","back","apply","_this"],"mappings":"4LAAe,SAASA,GAAWC,WACxBA,GAAsB,+BAARA,iBAAAA,KAA+C,kBAApBA,GAAIC,cAA+BC,OAAOC,eAAeC,KAAKJ,EAAK,gBAA2C,YAAzBA,EAAIC,YAAYI,KCC1I,QAASC,GAASC,EAAKC,GAChCF,EAAQG,aAERC,MAAMC,EAAeH,oOCHXA,mEAEc,gBAAjBA,GAAII,aACTA,SAAW,YAGU,kBAAhBJ,GAAIK,YACTA,QAAU,kDAKJC,EAAYC,KAAKC,SAAjBF,OACyC,sBAA5CZ,OAAOe,UAAUC,SAASd,KAAKU,WAC7BK,KAAKL,GAASM,QAAQ,SAACC,MACxBC,GAAOR,EAAQO,EACC,mBAATC,IAAuBD,IAAMb,EAAIe,SAClCF,GAAK,sCAAIG,4CACXC,GAAOH,EAAKI,QAAYF,EACxBzB,GAAU0B,KACsB,kBAAvBE,GAAKnB,EAAII,UACdb,EAAU4B,EAAKnB,EAAII,UAAUa,OAC3BZ,QAAQT,OAAWqB,KAGrBZ,QAAQT,OAAWqB"}